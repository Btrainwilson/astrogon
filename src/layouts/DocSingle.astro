---
import DocBrowser from "@/components/DocBrowser.astro";
import DocContents from "@/components/DocContents.astro";

import { ScrollArea } from "@/shortcodes/ScrollArea";

import config from "@/config/config.json";

import { menu } from "@/lib/utils/docsUtils";

const { settings } = config;

const { post } = Astro.props;
const { Content, headings } = await post.render();
const { title } = post.data;
const currentPage = new URL(Astro.request.url).pathname;

const hide_toc = false;
const hide_sidenav = false;
const max_width = false;
---

<section class="flex flex-1 flex-col md:flex-row container">
  <div
    class=`py-4 hidden md:flex max-h-static_sidemenu sticky top-[69px] 
    ${hide_toc && hide_sidenav && max_width ? "w-screen" : "md:px-6 md:w-1/4 lg:w-1/5"}`
  >
    <ScrollArea className="h-full w-full" client:only="react">
      {
        !settings.hide_doc_browser && !hide_sidenav && (
          <DocBrowser currentPage={currentPage} items={menu} level={0} />
        )
      }
    </ScrollArea>
  </div>
  <div
    class=`w-full ${hide_toc && hide_sidenav && max_width ? "" : "md:w-3/4 lg:w-3/5"}`
  >
    <!-- <Content /> -->
    <main class="py-4 overflow-auto">
      <article>
        <h1 class="mb-4">{title}</h1>
        <div class="content mb-10">
          <Content />
        </div>
      </article>
    </main>
  </div>
  <div
    class=`py-4 hidden lg:flex max-h-static_sidemenu sticky top-[69px] ${hide_toc && hide_sidenav && max_width ? "" : "px-6 lg:w-1/5"}`
  >
    <ScrollArea className="h-full w-full" client:only="react">
      {
        !settings.hide_doc_contents && !hide_toc && (
          <DocContents {headings} />
        )
      }
    </ScrollArea>
  </div>
</section>
<!-- 
<section class="section pt-7">
  <div class="container">
    <div class="row justify-center">
      <div class="flex">

        <div class="col-3 sticky top-12 h-screen flex">
          <DocBrowser currentPage={currentPage} />
        </div>

        <main class="py-4 col-9 lg:col-6 overflow-auto">
          <article>
            <h1 class="mb-4">{title}</h1>
            <div class="content mb-10">
              <Content />
            </div>
          </article>
        </main>

        <div class="col-3 sticky top-12 h-screen flex invisible lg:visible">
          <DocContents headings={headings} />
        </div>
      </div>
    </div>
  </div>
</section> -->
