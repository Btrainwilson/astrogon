---
import type { BlogEntry } from "@/types";
import config from "@/config/config.json";
import { upperHumanize, plainify, slugify, lowerHumanize } from "@/lib/utils/textConverter";
import {
  FaRegFolder,
  FaRegClock,
  FaHashtag,
  FaRegCalendarAlt,
} from "react-icons/fa/index.js";
import readingTime from "@/lib/utils/readingTime";

interface Props {
  data: BlogEntry;
}

const { data }: Props = Astro.props;
const { title, date, author, categories, tags, complexity } = data.data;
---

<div class="bg-body dark:bg-darkmode-body">
  <h4 class="mb-2">
    <a href={`/blog/${data.id}`}>
      {title}
    </a>
  </h4>
  <ul class="mb-2">
    <!-- <li class="mr-4 inline-block">
      <a href={`/authors/${slugify(author)}`}>
        <FaRegUserCircle className={"mr-2 -mt-1 inline-block"} />
        {upperHumanize(author)}
      </a>
    </li> -->
    { categories && (
      <li class="mr-0 inline-block">
        {
          categories.map((category: string, index: number) => (
            <a href={`/blog/categories/${slugify(category)}`}>
              <FaRegFolder className={"ml-2 -mt-1 inline-block"} />
              {upperHumanize(category)}
            </a>
          ))
        }
      </li>
    )}
    { tags && (
      <li class="mr-0 inline-block">
        {
          tags.map((tag: string, index: number) => (
            <a href={`/blog/tags/${slugify(tag)}`}>
              <FaHashtag className={"ml-2 -mt-1 inline-block"} />
              {lowerHumanize(tag)}
            </a>
          ))
        }
      </li>
    )}
    { date && (
      <li class="mr-0 inline-block">
        <FaRegCalendarAlt className={"ml-2 -mt-1 inline-block"} />
        {new Date(date).toLocaleDateString()}
      </li>
    )}
    { complexity > 0 && (
      <li class="mr-0 inline-block">
        <FaRegClock className={"ml-2 -mt-1 inline-block"} />
        {readingTime(data.body, complexity)}
      </li>
    )}
  </ul>
  <p class="mb-6">{plainify(data.body?.slice(0, Number(config.settings.summary_length)))}</p>
</div>
